<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:p="http://primefaces.org/ui"
              xmlns:f="http://java.sun.com/jsf/core">

	
	<h:form>
		
		<ui:param name="mbean" value="${agendaFaces}" />
		<p:remoteCommand name="atualizarDialogAgenda" process="@this" update="opDialogAgenda" global="false"/>
		<p:remoteCommand name="atualizarAgendasColaboradores" process="@this" update="dtAgendasColaboradores" global="false"/>
		
		<p:dialog id="dialogAgenda" header="Cadastro de Agenda" widgetVar="dlgAgenda" width="700" height="430" modal="true">
	  
	  		<p:ajax event="close" listener="#{agendaFaces.limpar}" update="opDialogAgenda"/>
	  		
	  		<p:outputPanel id="opDialogAgenda" style="width:100%">
	  		
	  			<p:outputPanel rendered="#{agendaFaces.usuarioMaster and agendaFaces.colaboradorSolicitante}">
	  			
			  		<ui:include src="/pages/agenda/include_dialog_agenda_solicitante.xhtml" />
			  	
		  		</p:outputPanel>
		  		
				<p:outputPanel rendered="#{(!agendaFaces.usuarioMaster || !agendaFaces.colaboradorSolicitante) and agendaFaces.agenda.id != null}">
				
					<ui:include src="/pages/agenda/include_dialog_agenda_resposta.xhtml" />
				
				</p:outputPanel>
		  		
				<p:outputPanel rendered="#{(!agendaFaces.usuarioMaster || !agendaFaces.colaboradorSolicitante) and agendaFaces.agenda.id == null}">
				
					<h:outputText value="Você não possui permissão para criar uma Agenda" style="margin-top: 20px"/><br/>
					<p:commandButton type="button" value="Fechar" onclick="dlgAgenda.hide();" style="margin-top: 20px" />
				
				</p:outputPanel>

			</p:outputPanel>
			
		</p:dialog>
		
		<p:remoteCommand name="addAudiencia" oncomplete="dlgAudiencia.show()" update="opDialogAudiencia"/>
		
		<p:dialog id="dialogAudiencia" header="Cadastro de Audiência" widgetVar="dlgAudiencia" width="700" modal="true">
		
			<p:outputPanel id="opDialogAudiencia">
			
				<p:outputPanel style="width:100%" rendered="#{agendaFaces.processoAudienciaUtil != null}">
				
					<h:panelGrid columns="1" columnClasses="coluna100" style="width:100%">
		
						<p:outputLabel for="numeroProcessoAudienciaAgenda" value="Processo" />
						<p:inputText id="numeroProcessoAudienciaAgenda" value="#{agendaFaces.processoAudienciaUtil.audiencia.processoNumero.numero}" readonly="true" />
				  		
			  		</h:panelGrid>
			  		
			  		<h:panelGrid columns="2" columnClasses="coluna50, coluna50" style="width:95%">
			  		
					  	<p:outputLabel for="dataAudienciaAudienciaAgenda" value="Data da Audiência" />
			  			<p:outputLabel for="flagClienteCienteAudienciaAgenda" value="Associado ciente" />
			  		
				  		<p:calendar id="dataAudienciaAudienciaAgenda" pattern="dd/MM/yyyy HH:mm" required="true" requiredMessage="Data da Audiência: Campo obrigatório" value="#{agendaFaces.processoAudienciaUtil.audiencia.dataAudiencia}"/>
				  		<p:selectBooleanCheckbox id="flagClienteCienteAudienciaAgenda" value="#{agendaFaces.processoAudienciaUtil.audiencia.flagClienteCiente}" />
				  		
				  		<p:outputLabel for="situacaoAudienciaAgenda" value="Situação" />
					  	<p:outputLabel for="varaAudienciaAgenda" value="Vara" />
					  	
				  		<p:selectOneMenu id="situacaoAudienciaAgenda" required="true" requiredMessage="Situação: Campo obrigatório" value="#{agendaFaces.processoAudienciaUtil.audiencia.situacaoAudiencia.id}" style="width:95%">
					  		<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					  		<f:selectItems value="#{agendaFaces.situacoesAudiencias}" />
					  	</p:selectOneMenu>
				  		<p:selectOneMenu id="varaAudienciaAgenda" required="true" requiredMessage="Vara: Campo obrigatório" value="#{agendaFaces.processoAudienciaUtil.audiencia.vara.id}" style="width:94%">
					  		<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					  		<f:selectItems value="#{agendaFaces.varas}" />
					  	</p:selectOneMenu>
					  	
				  	</h:panelGrid>
				  	
				  	<h:panelGrid columns="1" columnClasses="coluna100" style="width:100%">
				  	
					  	<p:outputPanel autoUpdate="true">
							<h:outputLabel value="Advogado" /><br/>
							<p:inputText required="true" requiredMessage="Advogado: Campo obrigatório" readonly="true" rendered="#{empty agendaFaces.processoAudienciaUtil.audiencia.audienciasAdvogados}" styleClass="coluna72"/>
							<p:inputText value="#{agendaFaces.processoAudienciaUtil.audiencia.audienciasAdvogados}" required="true" requiredMessage="Advogado: Campo obrigatório" readonly="true" rendered="#{not empty agendaFaces.processoAudienciaUtil.audiencia.audienciasAdvogados}" styleClass="coluna72"/>
							<p:commandButton type="button" value="Adicionar" icon="ui-icon-plus" onclick="dlgAdvogado4.show();" />
						</p:outputPanel>
					  	
					  	<p:outputLabel for="descricaoAudiencia" value="Descrição" />
						<p:inputTextarea id="descricaoAudiencia" value="#{agendaFaces.processoAudienciaUtil.audiencia.descricao}" required="true" requiredMessage="Descrição: Campo obrigatório" autoResize="false" rows="10" maxlength="500" styleClass="coluna90"/>
						
				  	</h:panelGrid>
				  	
				  	<p:commandButton value="Cadastrar" icon="salvar" action="#{agendaFaces.processoAudienciaUtil.cadastrarAudiencia}" update="@form" style="margin-left: 5px; margin-top:10px; margin-bottom:20px" rendered="#{agendaFaces.processoAudienciaUtil.audiencia.id == null}" />
				  	<p:commandButton value="Alterar" icon="salvar" action="#{agendaFaces.processoAudienciaUtil.alterarAudiencia}" update="@form" style="margin-left: 5px; margin-top:10px; margin-bottom:20px" rendered="#{agendaFaces.processoAudienciaUtil.audiencia.id != null}" />
				  	
				</p:outputPanel>
					
			</p:outputPanel>
			
		</p:dialog>
	
	</h:form>

</ui:component>
