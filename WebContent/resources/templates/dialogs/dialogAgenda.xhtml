<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:p="http://primefaces.org/ui"
              xmlns:f="http://java.sun.com/jsf/core">

	
	<h:form>
		
		<ui:param name="mbean" value="${agendaFaces}" />
		
		<p:remoteCommand name="atualizarDialogAgenda" process="@this" update="opDialogAgenda, opAgendasColaboradores" oncomplete="dlgAgenda.show();" global="false"/>
		<p:remoteCommand name="atualizarAgendasColaboradores" process="@this" update="opAgendasColaboradores"/>
		
		<p:dialog id="dialogAgenda" header="Cadastro de Agenda" widgetVar="dlgAgenda" width="720" height="430" modal="true">
	  
	  		<p:ajax event="close" listener="#{agendaFaces.limpar}" update="opDialogAgenda"/>
	  		
	  		<p:outputPanel id="opDialogAgenda" style="width:100%">
	  		
	  			<p:outputPanel id="opDialogAgendaSolicitante" rendered="#{agendaFaces.usuarioMaster and agendaFaces.agendaColaboradorSelecionado.id == null}">
	  			
			  		<ui:include src="/pages/agenda/include_dialog_agenda_solicitante.xhtml" />
			  	
		  		</p:outputPanel>
		  		
				<p:outputPanel rendered="#{(agendaFaces.usuarioMaster and agendaFaces.agendaColaboradorSelecionado.id != null) 
									|| (agendaFaces.agenda.id != null and !agendaFaces.usuarioMaster)}">
				
					<ui:include src="/pages/agenda/include_dialog_agenda_resposta.xhtml" />
				
				</p:outputPanel>
		  		
				<p:outputPanel rendered="#{agendaFaces.agenda.id == null and !agendaFaces.usuarioMaster}">
					<h:outputText value="Você não possui permissão para editar a Agenda" style="margin-top: 20px"/><br/>
					<p:commandButton type="button" value="Fechar" onclick="myschedule.update();" oncomplete="dlgAgenda.hide();" style="margin-top: 20px" />
				</p:outputPanel>
					
			</p:outputPanel>
			
		</p:dialog>
		
		<p:remoteCommand name="addAudiencia" process="@this" oncomplete="dlgAudiencia.show()" update="opDialogAudiencia" global="false"/>
		
		<p:dialog id="dialogAudiencia" header="Cadastro de Audiência" widgetVar="dlgAudiencia" width="700" modal="true">
		
			<p:outputPanel id="opDialogAudiencia">
			
				<ui:include src="/pages/agenda/include_dialog_agenda_audiencia.xhtml" />
					
			</p:outputPanel>
			
		</p:dialog>
	
	</h:form>

</ui:component>
