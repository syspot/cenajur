<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:p="http://primefaces.org/ui"
              xmlns:f="http://java.sun.com/jsf/core">

	<ui:param name="mbeanPesquisa" value="${parteContrariaPesquisaFaces}" />
	<ui:param name="mbeanPersist" value="${parteContrariaFaces}" />
	<ui:param name="mbeanPersistModel" value="${parteContrariaFaces.parteContraria}" />

	<h:form>
		
		<p:dialog id="dialogParteContraria" widgetVar="dlgParteContraria" width="600" height="400" modal="true">
	  
	  		<p:ajax event="close" listener="#{mbeanPersist.limpar}" update="opParteContraria, dialogParteContraria"/>
	  		
  			<f:facet name="header">
  				<h:outputText id="titleDialog" value="#{mbeanPesquisa.cadastrando ? 'Cadastro de Parte Contrária' : 'Pesquisa de Parte Contrária'}" />
  			</f:facet>
  			
	  		<p:outputPanel id="opParteContraria">
	  		
		  		<p:outputPanel rendered="#{!mbeanPesquisa.cadastrando}">
		  		
		  			<h:panelGrid style="width: 100%; text-align: right">
			  			<p:commandButton value="Novo" process="@this" update="opParteContraria, titleDialog">
			  				<f:setPropertyActionListener target="#{mbeanPesquisa.cadastrando}" value="#{true}" />
			  			</p:commandButton>
		  			</h:panelGrid>
		  			
			  		<h:panelGrid columns="1" columnClasses="coluna90" style="width:85%">
		  		
					  	<p:outputLabel for="descricaoPesquisa" value="Descrição" />
				  		<p:inputText id="descricaoPesquisa"  value="#{mbeanPesquisa.model.descricao}" style="width: 89%" maxlength="50"/>
					  	
				  	</h:panelGrid>
				  	
				  	<h:panelGrid columns="2" columnClasses="coluna35, coluna65" style="width:80%">
				  	
					  	<p:outputLabel for="tipoDocumentoPesquisa" value="Tipo de Documento" />
					  	<p:outputLabel for="numeroDocumentoPesquisa" value="Número" />
					  	
					  	<p:selectOneMenu id="tipoDocumentoPesquisa" value="#{mbeanPesquisa.model.tipoDocumento.id}" style="width:90%">
					  		<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					  		<f:selectItems value="#{mbeanPesquisa.tiposDocumentos}" />
					  	</p:selectOneMenu>
					  	<p:inputText id="numeroDocumentoPesquisa" value="#{mbeanPesquisa.model.numeroDocumento}" maxlength="50" styleClass="coluna90"/>
				  	
				  	</h:panelGrid>
						
					<p:commandButton value="Pesquisar" icon="pesquisar" action="#{mbeanPesquisa.find}" update="gridPesquisa" style="width: 140px; margin-left: 5px; margin-top:10px; margin-bottom:10px"/>
						
					<p:dataTable id="gridPesquisa" emptyMessage="Nenhuma parte contrária encontrada" paginator="true"
										paginatorAlwaysVisible="false" rows="5" value="#{mbeanPesquisa.grid}" var="parteContraria">
					
						<p:column headerText="Descrição">
							<h:outputText value="#{parteContraria.descricao}" />
						</p:column>
					
						<p:column headerText="Adicionar" styleClass="coluna10" style="text-align:center;">
							<p:commandLink action="#{processoFaces.addParteContraria}" onclick="dlgParteContraria.hide()">
								<h:graphicImage value="../resources/images/plus16.png" style="border: 0px" />
								<f:setPropertyActionListener target="#{processoFaces.parteContrariaSelecionada}" value="#{parteContraria}" />
							</p:commandLink>
						</p:column>
					
					</p:dataTable>
		  		
		  		</p:outputPanel>
		  		
		  		<p:outputPanel rendered="#{mbeanPesquisa.cadastrando}">
		  			
			  		<h:panelGrid columns="1" style="width:53%; margin-top: 20px">
			  		
					  	<p:outputLabel for="descricaoParteContraria" value="Descrição" />
					  	<p:inputText id="descricaoParteContraria" value="#{mbeanPersistModel.descricao}" required="true" requiredMessage="Descrição: Campo obrigatório" styleClass="coluna60" maxlength="50"/>
					  	
				  	</h:panelGrid>
				  	
				  	<h:panelGrid columns="2" columnClasses="coluna65, coluna35" style="width:90%">
				  	
					  	<p:outputLabel for="nomeAdvogadoParteContraria" value="Nome do Advogado" />
					  	<p:outputLabel for="oabAdvogadoParteContraria" value="OAB do Advogado" />
			  		
					  	<p:inputText id="nomeAdvogadoParteContraria" value="#{mbeanPersistModel.nomeAdvogado}" required="true" requiredMessage="Nome do Advogado: Campo obrigatório" styleClass="coluna96" maxlength="50"/>
					  	<p:inputText id="oabAdvogadoParteContraria" required="true" requiredMessage="OAB do Advogado: Campo obrigatório" value="#{mbeanPersistModel.oabAdvogado}" maxlength="30" styleClass="coluna90"/>
				  	
				  	</h:panelGrid>
				  	
				  	<h:panelGrid id="pgTipoDocumento" columns="3" columnClasses="coluna33, coluna30, coluna33" style="width:90%">
				  	
					  	<p:outputLabel for="tipoDocumentoParteContraria" value="Tipo de Documento" />
					  	<p:outputLabel for="numeroDocumentoParteContraria" value="Número" />
					  	<p:outputLabel for="telefoneParteContraria" value="Telefone" />
					  	
					  	<p:selectOneMenu id="tipoDocumentoParteContraria" required="true" requiredMessage="Tipo de Documento: Campo obrigatório" value="#{mbeanPersistModel.tipoDocumento.id}" style="width:95%">
					  		<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					  		<f:selectItems value="#{mbeanPersist.tiposDocumentos}" />
					  	</p:selectOneMenu>
					  	<p:inputText id="numeroDocumentoParteContraria" value="#{mbeanPersistModel.numeroDocumento}" required="true" requiredMessage="Número: Campo obrigatório" style="width: 90%" maxlength="50"/>
					  	<p:inputMask id="telefoneParteContraria" required="true" requiredMessage="Telefone: Campo obrigatório" mask="(99) 9999-9999" value="#{mbeanPersistModel.telefone}" maxlength="14" styleClass="coluna90"/>
				  	
				  	</h:panelGrid>
				  	
		  			<p:commandButton value="Salvar" action="#{mbeanPersist.inserirPorDialogPesquisa}" update="opParteContraria, titleDialog" oncomplete="handleRequestActionParteContraria('dialogParteContraria', dlgParteContraria, args)" style="margin-top: 30px">
		  				<f:setPropertyActionListener target="#{mbeanPesquisa.cadastrando}" value="#{false}" />
		  			</p:commandButton>
		  			<p:commandButton value="Voltar" process="@this" update="opParteContraria, titleDialog" style="margin-top: 30px">
		  				<f:setPropertyActionListener target="#{mbeanPesquisa.cadastrando}" value="#{false}" />
		  			</p:commandButton>
		  	
		  		</p:outputPanel>
	  
	  		</p:outputPanel>
	  		
	  		<p:remoteCommand name="addParteContraria" action="#{processoFaces.addParteContraria}" process="@this">
	  			<f:setPropertyActionListener target="#{processoFaces.parteContrariaSelecionada}" value="#{mbeanPersistModel}" />
	  			<f:setPropertyActionListener target="#{mbeanPesquisa.cadastrando}" value="#{false}" />
	  		</p:remoteCommand>
	  		
		</p:dialog>
	
	</h:form>

</ui:component>
