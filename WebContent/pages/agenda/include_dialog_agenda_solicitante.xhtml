<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
  	
	  
	<h:panelGrid columns="4" columnClasses="coluna16, coluna16, coluna16, coluna52" style="width: 100%">

		<p:outputLabel for="tipoAgenda" value="Tipo de Agenda" />
		<p:outputLabel for="dataInicioAgenda" value="Data Início" />
		<p:outputLabel for="dataFimAgenda" value="Data Fim" />
		<p:outputLabel for="processoAgenda" value="Processo" />
		
		<p:selectOneMenu id="tipoAgenda" value="#{agendaFaces.agenda.tipoAgenda.id}" required="true" requiredMessage="Tipo de Agenda: Campo obrigatório">
			<f:selectItem itemLabel="Não Selecionado" itemValue="" />
			<f:selectItems value="#{agendaFaces.tiposAgendas}" />
			<p:ajax event="change" update="pgColaboradorAgenda, pgClienteAgenda, dtAgendasColaboradores" listener="#{agendaFaces.alterarTipoAgenda}"/>
		</p:selectOneMenu>
		<p:calendar id="dataInicioAgenda" pattern="dd/MM/yyyy HH:mm" required="true" requiredMessage="Data: Campo obrigatório" value="#{agendaFaces.agenda.dataInicial}" >
			<p:ajax event="blur" update="opDataFinal" />
		</p:calendar>
		<p:outputPanel id="opDataFinal">
			<p:calendar id="dataFimAgenda" pattern="dd/MM/yyyy HH:mm" required="true" requiredMessage="Data: Campo obrigatório" value="#{agendaFaces.agenda.dataFinal}" mindate="#{agendaFaces.agenda.dataFinalMinima}" disabled="#{agendaFaces.agenda.dataInicial == null}" />
		</p:outputPanel>
		<p:outputPanel autoUpdate="true" style="width:100%">
			<p:inputText id="processoAgenda" value="#{agendaFaces.agenda.processoNumero.numero}" readonly="true" style="width:65%"/>
			<p:commandButton type="button" icon="ui-icon-plus" value="Add" onclick="dlgProcesso3.show();" />
		</p:outputPanel>
		
	</h:panelGrid>
	
	<h:panelGrid id="pgClienteAgenda" columns="3" columnClasses="coluna50, coluna15, coluna35" style="width:100%">
		
		<p:outputLabel for="clienteAgenda" value="Cliente" rendered="#{agendaFaces.agenda.tipoVisitaDoCliente}"/>
		<p:outputLabel for="tipoVisitaCliente" value="Tipo de Visita" rendered="#{agendaFaces.agenda.tipoVisitaDoCliente}"/>
		<p:outputLabel for="telefoneClienteAgenda" value="Telefone" rendered="#{agendaFaces.agenda.tipoVisitaDoCliente}"/>
		
		<p:outputPanel autoUpdate="true" style="width:100%" rendered="#{agendaFaces.agenda.tipoVisitaDoCliente}">
			<p:inputText id="clienteAgenda" value="#{agendaFaces.agenda.cliente.nome}" readonly="true" style="width:75%;"/>
			<p:commandButton type="button" icon="ui-icon-plus" value="Add" onclick="dlgCliente5.show();" style="margin-left: 10px" />
		</p:outputPanel>
		<p:selectOneMenu id="tipoVisitaCliente" value="#{agendaFaces.agenda.tipoVisita.id}" rendered="#{agendaFaces.agenda.tipoVisitaDoCliente}">
			<f:selectItems value="#{agendaFaces.tiposVisitas}" />
		</p:selectOneMenu>
		<p:inputMask id="telefoneClienteAgenda" mask="(99) 9999-9999" value="#{agendaFaces.agenda.telefoneCliente}" maxlength="14" styleClass="coluna90" rendered="#{agendaFaces.agenda.tipoVisitaDoCliente}"/>
	
	</h:panelGrid>
	
	<h:panelGrid style="width: 100%">

		<p:outputLabel for="descricaoAgenda" value="Descrição" />
		<p:inputTextarea id="descricaoAgenda" value="#{agendaFaces.agenda.descricao}" required="#{!agendaFaces.agenda.tipoVisitaDoCliente}" requiredMessage="Descrição: Campo obrigatório" cols="95" rows="10"/>
	
	</h:panelGrid>

	<h:panelGrid id="pgColaboradorAgenda" columns="2" columnClasses="coluna50_3, coluna50_3">
		<p:commandButton type="button" value="Add Colaborador" icon="ui-icon-plus" onclick="dlgColaborador2.show();" style="margin-top: 10px; margin-right: 10px; width:150px" rendered="#{!agendaFaces.agenda.tipoAudiencia}"/>
		<p:commandButton type="button" value="Add Colaborador" icon="ui-icon-plus" onclick="dlgAdvogado3.show();" style="margin-top: 10px; margin-right: 10px; width:150px" rendered="#{agendaFaces.agenda.tipoAudiencia}"/>
		<h:panelGrid columns="1">
			<p:outputLabel for="flagGeralAgenda" value="Geral" />
			<p:selectBooleanCheckbox id="flagGeralAgenda" value="#{agendaFaces.agenda.flagGeral}" />
		</h:panelGrid>
	</h:panelGrid>
	
	<p:outputPanel id="opAgendasColaboradores">
	
		<p:dataTable id="dtAgendasColaboradores" value="#{agendaFaces.agenda.agendasColaboradores}" var="agendaColaborador"
					emptyMessage="Nenhum colaborador adicionado" style="width:99%">
			
			<p:column headerText="Nome" styleClass="coluna20">
				<h:outputText value="#{agendaColaborador.colaborador.apelido}" />
			</p:column>
			
			<p:column headerText="Mensagem individual" styleClass="coluna75">
				<p:inputText value="#{agendaColaborador.descricao}" maxlength="200" styleClass="coluna90">
					<p:ajax event="blur" global="false"/>
				</p:inputText>
				<p:commandLink process="@this" global="false" oncomplete="dlgRespostaPropria.show()" rendered="#{agendaColaborador.colaborador.id == colaboradorConectado.id and agendaColaborador.id != null}">
					<h:graphicImage value="../resources/images/show.png" style="border: 0px; margin-left: 10px" />
					<f:setPropertyActionListener target="#{agendaFaces.agendaColaboradorSelecionado}" value="#{agendaColaborador}" />
				</p:commandLink>
			</p:column>
			
			<p:column headerText="Status" styleClass="coluna5">
				<h:outputText value="#{agendaColaborador.status}" title="#{agendaColaborador.textoResposta}" styleClass="#{agendaColaborador.css}" />
			</p:column>
			
			<p:column headerText="Excluir" styleClass="coluna5">
				<p:commandLink action="#{agendaFaces.removerAgendaColaborador}" oncomplete="atualizarAgendasColaboradores();" process="@this" icon="delete16" global="false">
					<h:graphicImage value="../resources/images/delete16.png" style="border: 0px" />
					<f:setPropertyActionListener target="#{agendaFaces.agendaColaboradorSelecionado}" value="#{agendaColaborador}" />
				</p:commandLink>
			</p:column>
		
		</p:dataTable>
		
	</p:outputPanel>
		
	<p:commandButton value="Salvar" action="#{agendaFaces.salvarAgenda}" process="@this, opDialogAgendaSolicitante" oncomplete="handleRequestFacesAtualizaAgenda('dialogAgenda', dlgAgenda, args);" update="opDialogAgenda" style="margin-top: 10px" />
	
</ui:composition>