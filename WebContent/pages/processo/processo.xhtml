<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="/resources/templates/templateCRUD.xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core">

	<ui:param name="mbean" value="${processoFaces}" />
	<ui:param name="mbeanModel" value="${processoFaces.crudModel}" />
	<ui:param name="mbeanPesquisaModel" value="${processoFaces.crudPesquisaModel}" />
	<ui:param name="informacoesCadastro" value="${true}" />

	<ui:define name="cadastro">

		<p:fieldset>

			<h:panelGrid columns="3" columnClasses="coluna30, coluna20, coluna30" style="width:50%">

				<p:outputLabel for="numeroProcesso" value="Número do Processo" />
				<p:outputLabel for="dataAbertura" value="Data de Abertura" />
				<p:outputLabel for="lote" value="Lote" />

				<p:inputText id="numeroProcesso" required="true" requiredMessage="Número do Processo: Campo obrigatório" value="#{mbeanModel.processoNumeroPrincipal.numero}" maxlength="30" styleClass="coluna90" />
				<p:calendar id="dataAbertura" pattern="dd/MM/yyyy" required="true" requiredMessage="Data de Abertura: Campo obrigatório" value="#{mbeanModel.dataAbertura}" />
				<p:inputText id="lote" value="#{mbeanModel.lote}" maxlength="30" styleClass="coluna95" />

			</h:panelGrid>
			
			<h:panelGrid columns="1" style="width: 70%">
			
				<h:outputText value="Outros números do Processo" />
				<p:outputPanel autoUpdate="true">
					<p:inputText value="#{mbeanModel.processosNumeros}" readonly="true" styleClass="coluna80" rendered="#{not empty mbeanModel.processosNumeros}"/>
					<p:inputText readonly="true" styleClass="coluna80" rendered="#{empty mbeanModel.processosNumeros}"/>
					<p:commandButton type="button" value="Editar" onclick="dlgNumeroProcesso.show()"/>
				</p:outputPanel>
				
			</h:panelGrid>

		</p:fieldset>

		<h:panelGrid columns="2" columnClasses="coluna50_2, coluna50_2" style="width:100%">

			<p:fieldset legend="Parte">

				<p:outputPanel id="opAssociados" autoUpdate="true">

					<p:commandButton type="button" value="Adicionar Associado" icon="ui-icon-plus" onclick="dlgCliente.show();" />
					
					<p:dataTable value="#{mbeanModel.processosClientes}" var="processoCliente" emptyMessage="Nenhum associado selecionado" rowIndexVar="index" style="width:100%">

						<p:column headerText="Nome" styleClass="coluna70">
							<h:outputText value="#{processoCliente.cliente.nome}" />
						</p:column>

						<p:column headerText="CPF" styleClass="coluna25">
							<h:outputText value="#{processoCliente.cliente.cpf}" />
						</p:column>

						<p:column headerText="Remover" styleClass="coluna5">
							<p:commandLink action="#{mbean.removeCliente}" process="@this">
								<h:graphicImage value="../resources/images/delete16.png" style="border: 0px" />
								<f:setPropertyActionListener target="#{mbean.processoClienteSelecionado}" value="#{processoCliente}" />
							</p:commandLink>
						</p:column>
						
						<p:column headerText="Alterar Situação" styleClass="coluna5">
							<h:outputText value="#{processoCliente.situacaoProcessoCliente}" />
							<p:commandLink oncomplete="dlgArquivarProcessoCliente.show();" process="@this">
								<h:graphicImage value="../resources/images/doc.png" style="border: 0px" />
								<f:setPropertyActionListener target="#{mbean.processoClienteSelecionado}" value="#{processoCliente}" />
							</p:commandLink>
						</p:column>

					</p:dataTable>

				</p:outputPanel>

			</p:fieldset>

			<p:fieldset legend="Parte Contrária">

				<p:outputPanel autoUpdate="true">

					<p:commandButton type="button" value="Adicionar Parte Contrária" icon="ui-icon-plus" onclick="dlgParteContraria.show();" />
					<p:dataTable value="#{mbeanModel.processosPartesContrarias}" var="processoParteContraria" emptyMessage="Nenhuma parte contrária selecionada" rowIndexVar="index" style="width:100%">

						<p:column headerText="Nome" styleClass="coluna95">
							<h:outputText value="#{processoParteContraria.parteContraria.descricao}" />
						</p:column>

						<p:column headerText="Remover" style="text-align: center" styleClass="coluna5">
							<p:commandLink action="#{mbean.removeParteContraria}" process="@this">
								<h:graphicImage value="../resources/images/delete16.png" style="border: 0px" />
								<f:setPropertyActionListener target="#{mbean.processoParteContrariaSelecionada}" value="#{processoParteContraria}" />
							</p:commandLink>
						</p:column>
						
						<p:column headerText="Alterar Situação" styleClass="coluna5">
							<p:commandLink type="button" process="@this" oncomplete="dlgArquivarProcessoParteContraria.show();" >
								<h:graphicImage value="../resources/images/doc.png" style="border: 0px" />
								<f:setPropertyActionListener target="#{mbean.processoParteContrariaSelecionada.situacaoProcessoParteContraria.id}" value="#{processoParteContraria.situacaoProcessoParteContraria.id}" />
								<f:setPropertyActionListener target="#{mbean.processoParteContrariaSelecionada.dataArquivamento}" value="#{processoParteContraria.dataArquivamento}" />
								<f:setPropertyActionListener target="#{mbean.indexProcessoParteContraria}" value="#{index}" />
							</p:commandLink>
						</p:column>

					</p:dataTable>

				</p:outputPanel>

			</p:fieldset>

		</h:panelGrid>

		<p:fieldset>

			<h:panelGrid columns="2" columnClasses="coluna50, coluna50" style="width:70%">

				<p:outputLabel for="parte" value="Tipo de Parte" />
				<p:outputLabel for="advogado" value="Advogado" />

				<p:selectOneMenu id="parte" required="true" requiredMessage="Tipo de Parte: Campo obrigatório" value="#{mbeanModel.tipoParte.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.tiposPartes}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="advogado" required="true" requiredMessage="Advogado: Campo obrigatório" value="#{mbeanModel.advogado.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.advogados}" />
				</p:selectOneMenu>

				<p:outputLabel for="tipoProcesso" value="Tipo de Processo" />
				<p:outputLabel for="objeto" value="Objeto" />

				<p:selectOneMenu id="tipoProcesso" required="true" requiredMessage="Tipo de Processo: Campo obrigatório" value="#{mbeanModel.tipoProcesso.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.tiposProcessos}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="objeto" required="true" requiredMessage="Objeto: Campo obrigatório" value="#{mbeanModel.objeto.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.objetos}" />
				</p:selectOneMenu>

				<p:outputLabel for="vara" value="Vara" />
				<p:outputLabel for="comarca" value="Comarca" />

				<p:selectOneMenu id="vara" required="true" requiredMessage="Vara: Campo obrigatório" value="#{mbeanModel.vara.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.varas}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="comarca" required="true" requiredMessage="Comarca: Campo obrigatório" value="#{mbeanModel.comarca.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.comarcas}" />
				</p:selectOneMenu>

			</h:panelGrid>

		</p:fieldset>

		<p:fieldset>

			<h:panelGrid columns="4" columnClasses="coluna23, coluna20, coluna45, coluna35" style="width:70%">

				<p:outputLabel for="dataAjuizamento" value="Data de Ajuizamento" />
				<p:outputLabel for="turno" value="Turno" />
				<p:outputLabel for="situacaoProcesso" value="Situação" />
				<p:outputLabel for="dataArquivamento" value="Data de Arquivamento" />

				<p:calendar id="dataAjuizamento" pattern="dd/MM/yyyy" required="true" requiredMessage="Data de Ajuizamento: Campo obrigatório" value="#{mbeanModel.dataAjuizamento}" style="width:90%" />
				<p:selectOneMenu id="turno" value="#{mbeanModel.turno.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.turnos}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="situacaoProcesso" required="true" requiredMessage="Situação: Campo obrigatório" value="#{mbeanModel.situacaoProcesso.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.situacoesProcessos}" />
					<p:ajax update="opDataArquivamento" process="@this" global="false" />
				</p:selectOneMenu>
				<p:outputPanel id="opDataArquivamento">
					<p:calendar id="dataArquivamento" pattern="dd/MM/yyyy" required="true" requiredMessage="Data de Arquivamento: Campo obrigatório" value="#{mbeanModel.dataArquivamento}" disabled="#{!mbeanModel.processoArquivado}" style="width:90%" />
				</p:outputPanel>
			</h:panelGrid>

		</p:fieldset>
		
		<p:fieldset>
	  	
	  		<h:panelGrid columns="1" style="width:60%">

				<p:commandButton type="button" value="Adicionar Documento" icon="ui-icon-plus" onclick="dlgDocumentoProcesso.show();" update="pgCategoriaDocumento" />
			
				<ui:include src="/pages/processo/include_grid_documentos.xhtml"/>
		  	
		  	</h:panelGrid>
			
	  	</p:fieldset>

	</ui:define>

	<ui:define name="pesquisaCampos">

		<p:fieldset>

			<h:panelGrid columns="4" columnClasses="coluna30, coluna20, coluna30, coluna20" style="width:50%">

				<p:outputLabel for="numeroProcessoPesquisa" value="Número do Processo" />
				<p:outputLabel for="dataAberturaPesquisa" value="Data de Abertura" />
				<p:outputLabel for="dataAjuizamentoPesquisa" value="Data de Ajuizamento" />
				<p:outputLabel for="lotePesquisa" value="Lote" />

				<p:inputText id="numeroProcessoPesquisa" value="#{mbeanPesquisaModel.processoNumeroPrincipal.numero}" maxlength="30" styleClass="coluna85" />
				<p:calendar id="dataAberturaPesquisa" pattern="dd/MM/yyyy" value="#{mbeanPesquisaModel.dataAbertura}" />
				<p:calendar id="dataAjuizamentoPesquisa" pattern="dd/MM/yyyy" value="#{mbeanPesquisaModel.dataAjuizamento}" styleClass="coluna90" />
				<p:inputText id="lotePesquisa" value="#{mbeanPesquisaModel.lote}" maxlength="30" styleClass="coluna85" />

			</h:panelGrid>

		</p:fieldset>

		<p:fieldset>

			<h:panelGrid columns="3" columnClasses="coluna30, coluna30, coluna30" style="width:70%">

				<p:outputLabel for="tipoProcessoPesquisa" value="Tipo de Processo" />
				<p:outputLabel for="partePesquisa" value="Tipo de Parte" />
				<p:outputLabel for="advogadoPesquisa" value="Advogado" />

				<p:selectOneMenu id="tipoProcessoPesquisa" value="#{mbeanPesquisaModel.tipoProcesso.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.tiposProcessos}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="partePesquisa" value="#{mbeanPesquisaModel.tipoParte.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.tiposPartes}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="advogadoPesquisa" value="#{mbeanPesquisaModel.advogado.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.advogados}" />
				</p:selectOneMenu>

			</h:panelGrid>

			<h:panelGrid columns="3" columnClasses="coluna30, coluna30, coluna30" style="width:70%">

				<p:outputLabel for="objetoPesquisa" value="Objeto" />
				<p:outputLabel for="comarcaPesquisa" value="Comarca" />
				<p:outputLabel for="varaPesquisa" value="Vara" />

				<p:selectOneMenu id="objetoPesquisa" value="#{mbeanPesquisaModel.objeto.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.objetos}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="comarcaPesquisa" value="#{mbeanPesquisaModel.comarca.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.comarcas}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="varaPesquisa" value="#{mbeanPesquisaModel.vara.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.varas}" />
				</p:selectOneMenu>

			</h:panelGrid>

		</p:fieldset>

		<p:fieldset>

			<h:panelGrid id="pgDataArquivamentoPesquisa" columns="3" columnClasses="coluna40, coluna60" style="width:58%">

				<p:outputLabel for="turnoPesquisa" value="Turno" />
				<p:outputLabel for="situacaoProcessoPesquisa" value="Situação" />
				<p:outputLabel for="dataArquivamentoPesquisa" value="Data de Arquivamento" />

				<p:selectOneMenu id="turnoPesquisa" value="#{mbeanPesquisaModel.turno.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.turnos}" />
				</p:selectOneMenu>
				<p:selectOneMenu id="situacaoProcessoPesquisa" value="#{mbeanPesquisaModel.situacaoProcesso.id}" style="width:95%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.situacoesProcessos}" />
					<p:ajax update="pgDataArquivamentoPesquisa" process="pgDataArquivamentoPesquisa" global="false" />
				</p:selectOneMenu>
				<p:calendar id="dataArquivamentoPesquisa" pattern="dd/MM/yyyy" value="#{mbeanPesquisaModel.dataArquivamento}" disabled="#{!mbeanPesquisaModel.processoArquivado}" style="width:90%" />

			</h:panelGrid>

		</p:fieldset>

	</ui:define>

	<ui:define name="colunasTabela">

		<p:column headerText="Número" styleClass="coluna25">
			<p:commandLink action="#{mbean.detailEvent}" ajax="false">
				<h:outputText value="#{linha.processosNumeros}" />
				<f:setPropertyActionListener target="#{mbeanModel}" value="#{linha}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Advogado" styleClass="coluna50">
			<p:commandLink action="#{mbean.detailEvent}" ajax="false">
				<h:outputText value="#{linha.advogado.apelido}" />
				<f:setPropertyActionListener target="#{mbeanModel}" value="#{linha}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Tipo" styleClass="coluna10">
			<p:commandLink action="#{mbean.detailEvent}" ajax="false">
				<h:outputText value="#{linha.tipoProcesso.descricao}" />
				<f:setPropertyActionListener target="#{mbeanModel}" value="#{linha}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Data de Abertura" styleClass="coluna15">
			<p:commandLink action="#{mbean.detailEvent}" ajax="false">
				<h:outputText value="#{linha.dataAbertura}">
					<f:convertDateTime pattern="dd/MM/yyyy HH:mm" locale="pt_BR" timeZone="America/Sao_Paulo" />
				</h:outputText>
				<f:setPropertyActionListener target="#{mbeanModel}" value="#{linha}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Situação" styleClass="coluna10">
			<p:commandLink action="#{mbean.detailEvent}" ajax="false">
				<h:outputText value="#{linha.situacaoProcesso.descricao}" styleClass="#{linha.situacaoProcesso.css}" />
				<f:setPropertyActionListener target="#{mbeanModel}" value="#{linha}" />
			</p:commandLink>
		</p:column>

	</ui:define>

	<ui:define name="tabsmeio">

		<ui:include src="/pages/processo/tab_andamento_processo.xhtml" />

		<ui:include src="/pages/processo/tab_audiencia.xhtml" />

	</ui:define>
	
</ui:composition>